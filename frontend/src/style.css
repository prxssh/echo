@import './styles/tokens.css';

html {
    background-color: var(--color-bg);
    color: var(--color-text);
}

/* Native dark UI elements when using Dark OLED */
:root[data-theme='dark-oled'] {
    color-scheme: dark;
}

/* Berkeley Mono embedding (optional). Place licensed WOFF2 files under
   src/assets/fonts/ with the following names. If not present, the app
   will fall back to system monospace fonts. */
@font-face {
    font-family: 'Berkeley Mono';
    src: url('assets/fonts/berkeley-mono-regular.woff2') format('woff2');
    font-style: normal;
    font-weight: 400;
    font-display: swap;
}
@font-face {
    font-family: 'Berkeley Mono';
    src: url('assets/fonts/berkeley-mono-italic.woff2') format('woff2');
    font-style: italic;
    font-weight: 400;
    font-display: swap;
}
@font-face {
    font-family: 'Berkeley Mono';
    src: url('assets/fonts/berkeley-mono-bold.woff2') format('woff2');
    font-style: normal;
    font-weight: 700;
    font-display: swap;
}
@font-face {
    font-family: 'Berkeley Mono';
    src: url('assets/fonts/berkeley-mono-bold-italic.woff2') format('woff2');
    font-style: italic;
    font-weight: 700;
    font-display: swap;
}

body {
    margin: 0;
    color: var(--color-text);
    font-family: var(--font-ui);
    font-size: var(--font-size-md);
    line-height: var(--line-height);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Ensure form controls inherit consistent typography */
:where(button, input, select, textarea) {
    font: inherit;
}

/* Typography utilities */
.text-2xs { font-size: var(--font-size-2xs); }
.text-xs { font-size: var(--font-size-xs); }
.text-sm { font-size: var(--font-size-sm); }
.text-md { font-size: var(--font-size-md); }
.text-lg { font-size: var(--font-size-lg); }
.text-xl { font-size: var(--font-size-xl); }
.text-2xl { font-size: var(--font-size-2xl); }
.leading-normal { line-height: var(--line-height); }
.font-mono { font-family: var(--font-mono); }
.font-ui { font-family: var(--font-ui); }

/* Responsive table helpers */
.table-wrap,
.tracker-table-wrap {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.tracker-table-wrap table {
    min-width: 560px; /* Ensure columns remain visible; enables horizontal scroll on small screens */
}

.tracker-table {
    /* Use auto layout so widths adapt immediately */
    table-layout: auto;
}
.tracker-table th:first-child,
.tracker-table td:first-child {
    max-width: 60%;
    overflow: hidden;
    text-overflow: ellipsis;
}
.tracker-table td:nth-child(2),
.tracker-table td:nth-child(3),
.tracker-table td:nth-child(4),
.tracker-table td:nth-child(5),
.tracker-table th:nth-child(2),
.tracker-table th:nth-child(3),
.tracker-table th:nth-child(4),
.tracker-table th:nth-child(5) {
    text-align: right;
    white-space: nowrap;
}

/* Align first visible tracker column (Announce URL) under torrent Name by adding a spacer column */
/* Align the URL column under the torrent Name column by adding left padding
   equal to the remove icon column in the torrent list (36px) */
.tracker-table th:first-child,
.tracker-table td:first-child {
    padding-left: calc(var(--space-3) + 36px);
}

/* Grid-based tracker list for perfect header/body alignment */
.tracker-grid {
    display: grid;
    /* Use Torrent table measured column widths for perfect alignment */
    grid-template-columns:
        var(--torrent-col-1, 36px)
        var(--torrent-col-2, minmax(280px, 1fr))
        var(--torrent-col-3, 120px)
        var(--torrent-col-4, 120px)
        var(--torrent-col-5, 120px)
        var(--torrent-col-6, 90px);
    align-items: center;
    column-gap: 0; /* Keep columns flush like the table */
    min-width: 560px;
}
.tracker-grid-header {
    font-weight: 600;
    opacity: 0.85;
    border-bottom: 1px solid var(--color-border);
}
.tracker-grid-header .num {
    text-align: left;
}
.tracker-grid-row {
    border-bottom: 1px solid var(--color-border-weak);
}
.tracker-grid > div {
    /* Match table cell padding so text origins align */
    padding: var(--space-2) var(--space-3);
}
/* Ensure Announce URL values start flush under the header text */
.tracker-grid-header > div:nth-child(2) {
    padding-left: var(--space-3) !important; /* align header label with Name header */
}
.tracker-grid-row > div:nth-child(2) {
    padding-left: 0 !important; /* allow URL values to start flush for more room */
    grid-column: 1 / 3; /* span spacer + URL columns to start at extreme left */
}
.tracker-grid .num {
    text-align: left;
    white-space: nowrap;
}

/* Ensure numeric headers align like table headers (left) */
.tracker-grid.tracker-grid-header .num {
    text-align: left;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table th,
.table td {
    padding: 8px;
    border-bottom: 1px solid var(--color-border-weak);
}

@media (max-width: 720px) {
    .table th,
    .table td {
        padding: 6px;
        font-size: var(--font-size-sm);
    }
}
